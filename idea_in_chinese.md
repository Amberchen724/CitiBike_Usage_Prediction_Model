# 思路来源

citibike已经成为nyc城市生活中不可或缺的一部分，其中不同的citibike station因为所处的地理位置不同，有着不同的人群构成和交通情况。因此不同类型的站点在不同的时间段将会面临不同的问题。而nyc中有近1000个站点，针对每个站点的进行问题分析并解决是一件十分耗时耗力的工作。因此想到可以对站点进行聚类，对每一类站点的问题进行分析，从而做到低成本的针对性解决问题。

# 聚类

不同citibike站点的本质区别，就是24小时中各个时间段中start和end的车子数量，因此根据这个特征进行聚类

## 数据清洗 (data laundry hahaha)

这里使用2015年全年的citibike trip数据，将12个月的数据变为1个一千万数据的数据集，同时有一个含有800多个citibike station信息的数据集。根据trip数据的startime endtime和station_id，从而找到24小时中每个小时各个站点在这一年中的start和end trip数量。从此每个站点我们就有48个特征值

## 建模

根据以上48个特征值进行聚类，这里尝试没有考虑capacity，因为这个特征是在建立该站点的时候人为设置的，在trip数据量极大的时候，对使用量的影响可以忽略。

根据肘部法选择6个类

# 人口影响

这里使用了工作和居住的人口数量/性别/年龄的因素，分析不同站点24小时的start end数量和这些因素的关系。通过corr的值找到，这些因素对哪个时间段的start和end影响最大


# 地铁影响

## 数据清洗

这里首先计算了每个citibike station周边20km（半径）的地铁站距离，从而画出citibike station和地铁站距离的分布直方图，发现距离范围集中在0-3km（具体再根据图确定一下把）于是选择峰值1.25km做为citibike station周边地铁站密度的计算指标（这里选择峰值是为了让这个密度的数值分布区别更大）

以上是密度，另一个因素则是距离citibike station最近的地铁站距离，同人口影响的分析。分析不同站点24小时的start end数量和这些因素的关系。通过corr的值找到，这些因素对哪个时间段的start和end影响最大

# 结果分析

画出了6个类型站点24小时的start end empty tripduration的变化，进行分析。（这里empty是获取了两周的每隔10分钟的实时citibike station的剩余车辆数量，可用dock数量，然后计算在着两周内，24小时各个时间段出现无可用车辆的次数 --- 这样子思路的基础，每个站点都被记录了相同的次数）

输出了6个类型站点的周边平均 工作和居住的人口数量/性别/年龄 和 地铁站密度，最近地铁站距离。可以结合上面的图形数据一起分析。

